<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ルール一覧 | 3タップルールズ</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    body { background:#f9fff9;font-family:"Helvetica",sans-serif;margin:0;padding-bottom:90px; }
    header { background:#00bfa5;color:#fff;text-align:center;padding:16px 0;font-size:24px;font-weight:bold;border-bottom-left-radius:25px;border-bottom-right-radius:25px; }
    .back-btn { display:block;width:220px;text-align:center;background:#FFD84D;color:#00997f;text-decoration:none;margin:20px auto;font-weight:bold;padding:12px 0;border-radius:40px;box-shadow:0 5px 12px rgba(0,0,0,0.15);transition:0.2s; }
    .back-btn:hover { background:#ffcc33;transform:translateY(-2px); }
    #searchArea { text-align:center;margin:10px auto 20px; }
    #searchInput { width:80%;max-width:400px;padding:10px 14px;font-size:16px;border-radius:25px;border:1px solid #ccc;box-shadow:0 2px 5px rgba(0,0,0,0.1);outline:none; }
    .rule-card { background:#fff;border-radius:30px;padding:14px 18px;font-size:17px;font-weight:600;margin:10px 16px;cursor:pointer;text-align:center;box-shadow:0 3px 6px rgba(0,0,0,0.08); }
    .rule-card:hover { background:#eaf9e6;transform:translateY(-2px); }
    .bottom-nav { position:fixed;bottom:0;left:0;width:100%;background:#fff;border-top:1px solid #ddd;display:flex;justify-content:space-around;align-items:center;height:70px;box-shadow:0 -2px 8px rgba(0,0,0,0.05);z-index:1000; }
    .bottom-nav img { width:50px;height:auto; }
  </style>
</head>
<body>
  <header>ルール一覧</header>
  <a href="index.html" class="back-btn">トップへ戻る</a>
  <div id="searchArea">
    <input id="searchInput" type="text" placeholder="ルールを検索…" />
  </div>
  <main id="rules-list"></main>
  <nav class="bottom-nav">
    <a href="index.html"><img src="home-icon.png" alt="ホーム"></a>
    <a href="rules.html"><img src="book-icon.png" alt="ルール一覧"></a>
    <a href="favorites.html"><img src="star-icon.png" alt="お気に入り"></a>
  </nav>

  <script>
  document.addEventListener("DOMContentLoaded", async () => {
    const listContainer = document.getElementById("rules-list");
    const searchInput = document.getElementById("searchInput");
    try {
      const res = await fetch("rules.json?v=" + Date.now());
      const rules = await res.json();
      renderList(rules);

      searchInput.addEventListener("input", () => {
        const q = searchInput.value.trim().toLowerCase();
        const filtered = rules.filter(r => r.title.toLowerCase().includes(q));
        renderList(filtered);
      });

      function renderList(list) {
        listContainer.innerHTML = list.map(r => `
          <div class="rule-card" onclick="location.href='rule.html?id=${r.id}'">${r.title}</div>
        `).join("");
      }
    } catch (err) {
      listContainer.innerHTML = "<p>ルールを読み込めませんでした。</p>";
    }
  });
  </script>
</body>
</html>
