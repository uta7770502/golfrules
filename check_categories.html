<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>ã‚«ãƒ†ã‚´ãƒªãƒ¼çµ±ä¸€ãƒã‚§ãƒƒã‚¯</title>
  <style>
    body { font-family: sans-serif; background: #f9fff9; padding: 20px; }
    pre { background: #fff; padding: 12px; border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
  </style>
</head>
<body>
  <h1>ğŸ“‹ ãƒ«ãƒ¼ãƒ«ã‚«ãƒ†ã‚´ãƒªãƒ¼çµ±ä¸€ãƒã‚§ãƒƒã‚¯</h1>
  <div id="result">èª­ã¿è¾¼ã¿ä¸­...</div>

  <script>
    // âœ… åŒç¾©èªå¸åé–¢æ•°ï¼ˆnormalizeï¼‰
    const normalize = (s = "") =>
      s
        .toLowerCase()
        .replace(/\s|ã€€/g, "")
        .replace(/[ï¼â€•â€”â€“]/g, "-")
        .replace(/ãƒ†ã‚£ãƒ¼ã‚¤ãƒ³ã‚°?ã‚¨ãƒªã‚¢/g, "ãƒ†ã‚£ãƒ¼")
        .replace(/ãƒ•ã‚§ã‚¢ã‚¦ã‚¨ã‚¤|ãƒ•ã‚§ã‚¢ï½³ï½´ï½²|ï¾Œï½ªï½±ï½³ï½´ï½²|ï¾Œï½ªï½±ï½³ï½´ï½°|ãƒ•ã‚§ã‚¢ã‚¦ã‚¨ãƒ¼/g, "ãƒ•ã‚§ã‚¢ã‚¦ã‚§ã‚¤")
        .replace(/ãƒ©ãƒ•åœ°å¸¯|ï½¾ï¾ï¾—ï¾Œ/g, "ãƒ©ãƒ•")
        .replace(/ã‚°ãƒªãƒ¼ãƒ³ä¸Š|ãƒ‘ãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚°ãƒªãƒ¼ãƒ³/g, "ã‚°ãƒªãƒ¼ãƒ³")
        .replace(/ãƒšãƒŠ(ãƒ«ãƒ†ã‚£)?ã‚¨ãƒªã‚¢|ãƒã‚¶ãƒ¼ãƒ‰/g, "ãƒšãƒŠãƒ«ãƒ†ã‚£ã‚¨ãƒªã‚¢")
        .replace(/èµ¤æ­|ãƒ©ãƒ†ãƒ©ãƒ«/g, "èµ¤æ­")
        .replace(/é»„æ­/g, "é»„æ­")
        .replace(/ã‚¢ãƒ³ãƒ—ãƒ¬(ãƒ¤ãƒ–ãƒ«)?/g, "ã‚¢ãƒ³ãƒ—ãƒ¬")
        .replace(/ãƒãƒŠãƒ¼ãƒ»?ã‚¨ãƒã‚±ãƒƒãƒˆ|ï½´ï¾ï½¹ï½¯ï¾„/g, "ãƒãƒŠãƒ¼ãƒ»ã‚¨ãƒã‚±ãƒƒãƒˆ")
        .replace(/åŸºæœ¬ãƒ«ãƒ¼ãƒ«|ä¸€èˆ¬è¦å‰‡/g, "åŸºæœ¬ãƒ«ãƒ¼ãƒ«")
        .trim();

    (async () => {
      const result = document.getElementById("result");
      try {
        const res = await fetch("rules.json");
        const rules = await res.json();

        // ã‚«ãƒ†ã‚´ãƒªã‚’æŠ½å‡º
        const categoryMap = {};
        for (const r of rules) {
          const raw = (r.category || "").trim();
          if (!raw) continue;
          const norm = normalize(raw);
          if (!categoryMap[norm]) categoryMap[norm] = new Set();
          categoryMap[norm].add(raw);
        }

        // å‡ºåŠ›æ•´å½¢
        let html = "<pre>";
        for (const [norm, originals] of Object.entries(categoryMap)) {
          html += `âœ… çµ±ä¸€å¾Œ: ${norm}\n`;
          html += `ã€€â”— åŸæ–‡: ${Array.from(originals).join(", ")}\n\n`;
        }
        html += "</pre>";
        result.innerHTML = html;
      } catch (e) {
        result.textContent = "rules.json ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚";
        console.error(e);
      }
    })();
  </script>
</body>
</html>
