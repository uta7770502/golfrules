<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ゴルフルール一覧</title>
<link rel="stylesheet" href="style.css" />
<style>
body {
  font-family: "Hiragino Sans", sans-serif;
  background: #f7fff7;
  margin: 0;
  padding: 0;
}
header {
  background: #c9f5c9;
  padding: 12px;
  text-align: center;
  font-weight: bold;
  color: #004400;
  font-size: 20px;
}
#searchBox {
  text-align: center;
  margin: 16px;
}
#searchInput {
  padding: 8px;
  width: 80%;
  max-width: 400px;
  border-radius: 6px;
  border: 1px solid #aaa;
}
.rules-container {
  display: flex;
  flex-direction: column;
  align-items: center;
}
.rule-card {
  background: #fff;
  border-radius: 12px;
  width: 90%;
  max-width: 600px;
  margin: 10px 0;
  padding: 12px 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}
.rule-title {
  font-weight: 700;
  font-size: 16px;
  color: #006400;
}
.rule-category {
  font-size: 12px;
  color: #777;
  margin-bottom: 6px;
}
.back-btn {
  display: block;
  margin: 24px auto;
  padding: 10px 24px;
  background: #66bb6a;
  color: white;
  border-radius: 8px;
  text-align: center;
  width: fit-content;
  text-decoration: none;
}
</style>
</head>

<body>
<header>ゴルフルール一覧（2025 最新版）</header>

<div id="searchBox">
  <input id="searchInput" type="text" placeholder="キーワードで検索..." />
</div>

<div id="rulesContainer" class="rules-container"></div>

<a href="index.html" class="back-btn">🏠 トップページへ戻る</a>

<script>
async function loadRules() {
  const res = await fetch('rules.json');
  const rules = await res.json();
  const container = document.getElementById('rulesContainer');

  const params = new URLSearchParams(window.location.search);
  const category = params.get('category');
  const keyword = params.get('keyword');

  let filtered = rules;
  if (category) filtered = rules.filter(r => r.category === category);
  if (keyword) filtered = rules.filter(r =>
    r.title.includes(keyword) || r.description.includes(keyword)
  );

  function render(list) {
    container.innerHTML = "";
    list.forEach(r => {
      const card = document.createElement('div');
      card.className = 'rule-card';
      card.innerHTML = `
        <div class="rule-title">${r.title}</div>
        <div class="rule-category">カテゴリ：${r.category}</div>
        <div class="rule-description">${r.description}</div>
      `;
      container.appendChild(card);
    });
  }

  render(filtered);

  document.getElementById('searchInput').addEventListener('input', e => {
    const val = e.target.value.toLowerCase();
    const result = filtered.filter(r =>
      r.title.toLowerCase().includes(val) ||
      r.description.toLowerCase().includes(val)
    );
    render(result);
  });
}
loadRules();
</script>
</body>
</html>
